# SRE Workflow Demo

SRE面接用ワークフロー - 内定確実レベル実装

## 概要

このプロジェクトは、SRE内定の最低ライン（変更の安全性・供給網セキュリティ・自動デプロイ/ロールバック）を満たし、実務でそのまま使えるレベルのワークフローを実装しています。

## 実装した機能

### 1. SBOM + 脆弱性ゲート（PR必須）
- PRでSBOM生成とTrivy脆弱性スキャン（HIGH以上で失敗）
- ファイルシステムとイメージの両方をスキャン

### 2. イメージ公開 + 署名
- mainブランチでのみGHCRにイメージをpush
- Cosignによる署名とSBOMアテステーション

### 3. 自動デプロイ + ロールバック
- Cloud Runへの自動デプロイ
- ダイジェスト固定によるセキュアなデプロイ
- ヘルスチェック失敗時の自動ロールバック

### 4. ブランチ保護
- Required checksによるマージゲート
- PRレビュー必須

## ローカル開発

```bash
npm install
npm run dev
```

## テスト

```bash
npm test
npm run lint
```

## エンドポイント

- `/health` - ヘルスチェック
- `/` - ルートエンドポイント
- `/api/status` - サービスステータス